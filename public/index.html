<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unify - Red Social Escolar</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="app.js"></script>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    <!-- Emoji Button library -->
    <script src="https://cdn.jsdelivr.net/npm/@joeattardi/emoji-button@4.6.4/dist/emoji-button.min.js"></script>
    <style>
        .profile-card {
          display: flex;
          align-items: center;
          gap: 1.5em;
          background: #fff;
          border-radius: 22px;
          box-shadow: 0 4px 24px #7c3aed18;
          padding: 1.3em 1.7em;
          margin-bottom: 0.9em;
          transition: box-shadow 0.2s;
          min-width: 0;
        }
        .profile-card:hover {
          box-shadow: 0 8px 32px #6366f140;
        }
        .profile-avatar {
          width: 74px;
          height: 74px;
          border-radius: 50%;
          object-fit: cover;
          border: 3.5px solid #a5b4fc;
          background: #f5f8fa;
          box-shadow: 0 2px 12px #6366f120;
        }
        .profile-info {
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          min-width: 0;
        }
        .profile-name {
          font-size: 1.25em;
          font-weight: 800;
          color: #1da1f2;
          margin-bottom: 0.3em;
          text-shadow: 0 2px 8px #a5b4fc30;
          word-break: break-word;
        }
        .profile-actions {
          display: flex;
          gap: 0.7em;
          margin-top: 0.2em;
        }
        .profile-btn, .profile-msg-btn {
          background: linear-gradient(90deg,#6366f1 0%,#1da1f2 100%);
          color: #fff;
          border: none;
          border-radius: 999px;
          padding: 0.5em 1.3em;
          font-size: 1.05em;
          font-weight: 700;
          cursor: pointer;
          box-shadow: 0 2px 8px #7c3aed20;
          transition: background 0.2s;
        }
        .profile-btn:hover, .profile-msg-btn:hover {
          background: linear-gradient(90deg,#1da1f2 0%,#6366f1 100%);
        }
        .profile-msg-btn {
          background: linear-gradient(90deg,#a5b4fc 0%,#6366f1 100%);
          color: #fff;
        }
    </style>
</head>
<body>
    <header id="mainHeader" style="display:block;background:linear-gradient(90deg,#6366f1 0%,#1da1f2 100%);box-shadow:0 2px 16px #6366f120;padding:0.7em 3vw 0.7em 3vw;">
        <div style="display:flex;align-items:center;gap:18px;">
            <img src="Imagen de WhatsApp 2025-06-30 a las 16.27.11_e30dd0a0.jpg" alt="Unify logo" style="height:54px;width:54px;border-radius:18px;box-shadow:0 2px 12px #7c3aed30;border:2px solid #fff;background:#fff;">
            <h1 style="margin:0;font-size:2.5rem;color:#fff;letter-spacing:-2px;font-weight:900;text-shadow:0 4px 18px #1da1f280,0 1px 0 #6366f1;">Unify</h1>
        </div>
        <nav>
            <button id="loginBtn" style="background:#fff;color:#1da1f2;font-weight:bold;border:none;border-radius:999px;padding:0.6em 1.5em;font-size:1.1em;box-shadow:0 2px 8px #7c3aed20;transition:background 0.2s;">Iniciar Sesión</button>
            <button id="logoutBtn" style="display:none;background:#fff;color:#d32f2f;font-weight:bold;border:none;border-radius:999px;padding:0.6em 1.5em;font-size:1.1em;box-shadow:0 2px 8px #7c3aed20;transition:background 0.2s;">Cerrar Sesión</button>
            <input type="text" id="searchUser" placeholder="Buscar usuarios..." style="margin-left:1.2rem;padding:0.5rem 1.1rem;border-radius:8px;border:1.5px solid #a5b4fc;font-size:1em;box-shadow:0 2px 8px #7c3aed10;">
            <div id="searchResults" style="position:absolute;background:#fff;z-index:1001;box-shadow:0 2px 8px rgba(0,0,0,0.08);border-radius:8px;display:none;"></div>
        </nav>
    </header>
    <div id="welcome" style="display:flex;flex-direction:row;align-items:center;justify-content:center;min-height:100vh;padding:0;background:linear-gradient(135deg,#e0e7ff 0%,#a5b4fc 100%);gap:4.5em;">
        <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:340px;max-width:400px;margin-right:4vw;">
            <button id="loginBtnGoogle" style="background:#1da1f2;color:#fff;border:none;border-radius:999px;padding:1.1rem 2.7rem;font-size:1.3rem;font-weight:bold;cursor:pointer;box-shadow:0 2px 12px #7c3aed30;margin-bottom:1.5em;">Iniciar Sesión con Google</button>
            <form id="loginForm" style="display:flex;flex-direction:column;gap:0.7em;width:100%;max-width:340px;background:#f5f8fa;padding:2em 2em 1.5em 2em;border-radius:18px;box-shadow:0 2px 12px rgba(0,0,0,0.08);">
                <input id="loginEmail" type="email" placeholder="Correo electrónico" required style="padding:0.7em 1em;border-radius:8px;border:1px solid #e6ecf0;font-size:1em;">
                <input id="loginPass" type="password" placeholder="Contraseña" required style="padding:0.7em 1em;border-radius:8px;border:1px solid #e6ecf0;font-size:1em;">
                <button type="submit" style="background:#1da1f2;color:#fff;border:none;border-radius:999px;padding:0.7em 0;font-size:1.1em;font-weight:bold;cursor:pointer;">Iniciar Sesión</button>
                <span id="loginError" style="color:#d32f2f;font-size:0.98em;display:none;"></span>
                <span style="text-align:center;color:#888;font-size:0.98em;">¿No tienes cuenta? <a href="#" id="showRegister" style="color:#1da1f2;cursor:pointer;">Regístrate</a></span>
            </form>
            <form id="registerForm" style="display:none;flex-direction:column;gap:0.7em;width:100%;max-width:340px;background:#f5f8fa;padding:2em 2em 1.5em 2em;border-radius:18px;box-shadow:0 2px 12px rgba(0,0,0,0.08);margin-top:1em;">
                <input id="registerEmail" type="email" placeholder="Correo electrónico" required style="padding:0.7em 1em;border-radius:8px;border:1px solid #e6ecf0;font-size:1em;">
                <input id="registerPass" type="password" placeholder="Contraseña" required style="padding:0.7em 1em;border-radius:8px;border:1px solid #e6ecf0;font-size:1em;">
                <input id="registerName" type="text" placeholder="Nombre completo" required style="padding:0.7em 1em;border-radius:8px;border:1px solid #e6ecf0;font-size:1em;">
                <button type="submit" style="background:#1da1f2;color:#fff;border:none;border-radius:999px;padding:0.7em 0;font-size:1.1em;font-weight:bold;cursor:pointer;">Registrarse</button>
                <span id="registerError" style="color:#d32f2f;font-size:0.98em;display:none;"></span>
                <span style="text-align:center;color:#888;font-size:0.98em;">¿Ya tienes cuenta? <a href="#" id="showLogin" style="color:#1da1f2;cursor:pointer;">Inicia sesión</a></span>
            </form>
        </div>
        <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.2em;flex:1;max-width:420px;margin-left:4vw;">
            <img src="Imagen de WhatsApp 2025-06-30 a las 16.27.11_e30dd0a0.jpg" alt="Unify logo" style="height:160px;width:160px;border-radius:32px;box-shadow:0 4px 32px #7c3aed40;border:4px solid #fff;object-fit:cover;background:#fff;">
            <h1 style="color:#1da1f2;font-size:3rem;font-weight:900;letter-spacing:-2px;text-shadow:0 2px 12px #7c3aed30;margin:0;">Unify</h1>
            <p style="font-size:1.3rem;color:#555;font-weight:500;text-align:center;max-width:320px;">Conecta, comparte y chatea con tu colegio</p>
        </div>
    </div>
    <main id="main-content" style="display:block;">
        <div class="main-flex">
            <div class="main-center">
                <section id="post-section" style="display:none;">
                    <div class="post-section-card">
                        <form id="postForm">
                            <textarea id="postContent" placeholder="¿Qué quieres compartir?" required></textarea>
                            <button type="submit">Publicar</button>
                        </form>
                    </div>
                </section>
                <!-- Lista de publicaciones -->
                <section id="feed">
                    <!-- Aquí se mostrarán las publicaciones -->
                </section>
            </div>
            <aside id="usersAside" style="width:270px;min-width:200px;max-width:320px;background:linear-gradient(135deg,#f5f8fa 60%,#e0e7ff 100%);border-radius:22px;padding:2rem 1.2rem 1.2rem 1.2rem;box-shadow:0 4px 24px #6366f120;display:block;">
                <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5em;gap:0.7em;">
                    <h3 style="color:#6366f1;margin:0;font-size:1.25em;font-weight:900;letter-spacing:-1px;text-shadow:0 2px 8px #a5b4fc60;">Usuarios registrados</h3>
                </div>
                <div id="usersList" style="display:flex;flex-direction:column;gap:1.2em;"></div>
                <script>
                window.addEventListener('load', function() {
                  const usersList = document.getElementById('usersList');
                  if (usersList) {
                    usersList.innerHTML = `
                      <div class="profile-card">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" class="profile-avatar" alt="Usuario">
                        <div class="profile-info" style="flex:1;">
                          <div class="profile-name">Juan Pérez</div>
                        </div>
                        <div class="profile-actions" style="flex-direction:row;align-items:center;gap:0.5em;">
                          <button class="profile-msg-btn">Mensaje</button>
                          <button class="profile-btn">Ver perfil</button>
                        </div>
                      </div>
                      <div class="profile-card">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" class="profile-avatar" alt="Usuario">
                        <div class="profile-info" style="flex:1;">
                          <div class="profile-name">Ana Gómez</div>
                        </div>
                        <div class="profile-actions" style="flex-direction:row;align-items:center;gap:0.5em;">
                          <button class="profile-msg-btn">Mensaje</button>
                          <button class="profile-btn">Ver perfil</button>
                        </div>
                      </div>
                      <div class="profile-card">
                        <img src="data:image/svg+xml;utf8,<svg width='74' height='74' viewBox='0 0 74 74' fill='none' xmlns='http://www.w3.org/2000/svg'><circle cx='37' cy='37' r='37' fill='white'/><ellipse cx='37' cy='29' rx='13' ry='13' fill='%23E0E7FF'/><ellipse cx='37' cy='29' rx='7' ry='7' fill='%236366F1'/><ellipse cx='37' cy='54' rx='18' ry='10' fill='%23E0E7FF'/></svg>'" class="profile-avatar" alt="Avatar por defecto">
                        <div class="profile-info" style="flex:1;">
                          <div class="profile-name">Usuario sin foto</div>
                        </div>
                        <div class="profile-actions" style="flex-direction:row;align-items:center;gap:0.5em;">
                          <button class="profile-msg-btn">Mensaje</button>
                          <button class="profile-btn">Ver perfil</button>
                        </div>
                      </div>
                    `;
                  }
                });
                </script>
            </aside>
        </div>
    </main>
    <!-- Eliminar el footer -->
</body>
</html>
